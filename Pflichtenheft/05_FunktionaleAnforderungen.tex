\section{Funktionale Anforderungen}

\subsection{Pflichtkriterien}

\subsubsection{Allgemein}

\textbf{/F0000/}
Es können Simulationen erstellt werden.

\textbf{/F0010/} 
Die Simulation kann gestartet werden.

\textbf{/F0020/}
Alle Simulationen können gleichzeitig gestartet werden.

\textbf{/F0030/} 
Die Ergebnisse der Simulation können angezeigt werden.

\textbf{/F0040/}
Eine Simulation endet wenn ein Gleichgewichtszustand erreicht wird oder
die maximale Zyklenanzahl erreicht wird.

\textbf{/F0050/}
Menüpunkt zum Verwalten eigener Spiele. Ein Spiel kann erstellt und gespeichert werden. Jedes Spiel erhält einen Namen. Ein Spiel kann umbenannt werden. Ein bereits erstelltes Spiel kann gelöscht werden. Erstellte Spiele können bearbeitet werden.

\textbf{/F0060}
Menüpunkt zum Verwalten von Strategien. Eine Strategie kann erstellt und gespeichert werden. Jede Strategie erhält einen Namen. Eine Strategie kann umbenannt werden. Eine bereits erstellte Strategie kann gelöscht werden. Erstellte Strategien können bearbeitet werden.

\textbf{/F0070/}
Menüpunkt zum Verwalten von Initialisierungen.Eine Initialisierung kann erstellt und gespeichert werden. Jede Initialisierung  erhält einen Namen. Eine Initialisierung kann umbenannt werden. Eine bereits erstellte Initialisierung kann gelöscht werden. Erstelle Initialisierungen können bearbeitet werden.

\subsubsection{Simulation erstellen}

\textbf{/F0100/}
Eine Simulation wird durch eine Konfiguration beschrieben. Eine Konfiguration enthält
\begin{enumerate}
\item das zu simulierende Spiel
\item die Initialisierung der Simulation
\item den Anpassungsalgorithmus 
\item den Bewertungsalgorithmus
\item die Anzahl der Runden
\item die maximale Anzahl an Zyklen
\item die Wahrscheinlichkeit für die Strategieanpassung
\item den Algorithmus zum Bilden der Paare
\end{enumerate}

\textbf{/F0110/}
Eine Initialisierung kann unabhängig von einer Konfiguration erstellt und gespeichert werden. Die gespeicherten Initialisierungen können bei der Konfiguration ausgewählt werden. Eine Konfiguration enthält genau eine Initialisierung. In der Initialisierung werden die Parameter /F0130/ bis /F0150/ festgelegt. Sowie Gruppen erstellt.

\textbf{/F0120/}
Es könne Gruppen erstellt werden. Jede Gruppe erhält einen Namen und eine ID. 

\textbf{/F0130/} 
Die Anzahl der Agenten kann festgelegt werden. Es werden nur gerade Zahlen zugelassen. Die Agenten werden automatisch nummeriert. Die Nummer erfüllt die Funktion einer ID.

\textbf{/F0140/} 
Der Verteilung der initialen Strategien der Agenten kann festgelegt werden. Für die Verteilung der Strategien hat man die Optionen
\begin{enumerate}
\item Die Agenten mit der Strategie werden angegeben. Die Agenten werden dabei einzeln mit ihrer ID oder durch ein Intervall angegeben. Bei einem Intervall erhalten alle Agenten in dem Intervall die Strategie. Anfangs- und Endwerte des Intervalls sind inklusive. Intervalle und einzelne IDs können beliebig kombiniert werden, sie werden durch Kommas getrennt.
\item Der Anteil einer Strategie in einer Gruppe wird prozentual angegeben. Welche Agenten in der Gruppe die Strategie erhalten ist zufällig. Gruppen werden über ihren Namen identifiziert. 
\item Der Anteil der Strategien für die Agenten, die nicht in 1. und 2. enthalten sind, wird prozentual angegeben.
\end{enumerate}
Alle Optionen können miteinander kombiniert werden. Kein Agent darf zwei Strategien zugewiesen bekommen.

\textbf{/F0150/} 
Die Agenten können in Gruppen eingeteilt werden. Die Gruppen müssen nicht disjunkt sein. Für die Verteilung der Agenten hat man die Optionen
\begin{enumerate}
\item Die Agenten in einer Gruppe werden angegeben. Die Agenten werden dabei einzeln mit ihrer ID oder durch ein Intervall angegeben. Bei einem Intervall werden alle Agenten in dem Intervall der Gruppe hinzugefügt. Anfangs- und Endwerte des Intervalls sind inklusive. Intervalle und einzelne IDs können beliebig kombiniert werden, sie werden durch Kommas getrennt.
\item Der Anteil der Agenten in einer Gruppe kann angegeben werden. 
\end{enumerate}
Die Optionen können miteinander kombiniert werden. Dabei gilt, es werden in so viele Agenten in eine Gruppe hinzugefügt bis die aus 1. und in 2. zufällig ausgewählten Agenten zusammen dem Anteil aus 2. entsprechen. Der Anteil muss größer gleich dem in 1. entsprechenden Anteil hinzugefügter Agenten sein. 

\textbf{/F0160/} 
Es werden Standartwerte für die Initialisierung aus einer Config-Datei geladen.

\textbf{/F0170/} 
Für die Parameter in der Initialisierung und die Parameter 5. - 7. in /F0100/ kann man mehrere Werte in der Form \emph{Startwert} - \emph{Endwert} - \emph{Schrittweite} angeben. Die Schrittweite kann negativ sein. Innerhalb der Verteilung von Strategien und Gruppen können mehrere Parameter variabel sein. Es können nicht /F0140/ und /F0150/ gleichzeitig variabel sein. Ansonsten kann immer nur ein Parameter variabel sein. Erstellt man eine Konfiguration mit variablen Parametern, wird für jeden möglichen Parameter eine eigene Simulation erstellt.

\textbf{/F0180/}
Beim Starten der Simulation wird die Anzahl der Wiederholungen abgefragt.

\subsubsection{Spiele}
Alle implementierten Spiele sind mit ihren Payoffs angegeben. $K$ steht für die Aktion \emph{Kooperation} und $D$ für \emph{Defektion}.

\textbf{/F0300/} 
Gefangenendilemma
\begin{table}[H]
\centering
\setlength{\extrarowheight}{2pt}
\begin{tabular}{cc|c|c|}
  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Spieler $2$} \\
  & \multicolumn{1}{c}{} & \multicolumn{1}{c}{$K$} & \multicolumn{1}{c}{$D$} \\\cline{3-4}
  \multirow{2}*{Spieler $1$} & $K$ & $-1,-1$ & $-3,0$ \\\cline{3-4} 
  & $D$ & $0,-3$ & $-2,-2$ \\\cline{3-4}
\end{tabular}
\end{table}

\textbf{/F0310/} 
Feiglingsspiel
\begin{table}[H]
\centering
\setlength{\extrarowheight}{2pt}
\begin{tabular}{cc|c|c|}
  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Spieler $2$} \\
  & \multicolumn{1}{c}{} & \multicolumn{1}{c}{$K$} & \multicolumn{1}{c}{$D$} \\\cline{3-4}
  \multirow{2}*{Spieler $1$} & $K$ & $4,4$ & $2,6$ \\\cline{3-4} 
  & $D$ & $6,2$ & $0,0$ \\\cline{3-4}
\end{tabular}
\end{table}

\textbf{/F0320/} 
Hirschjagd
\begin{table}[H]
\centering
\setlength{\extrarowheight}{2pt}
\begin{tabular}{cc|c|c|}
  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Spieler $2$} \\
  & \multicolumn{1}{c}{} & \multicolumn{1}{c}{$K$} & \multicolumn{1}{c}{$D$} \\\cline{3-4}
  \multirow{2}*{Spieler $1$} & $K$ & $4,4$ & $0,3$ \\\cline{3-4} 
  & $D$ & $3,0$ & $3,3$ \\\cline{3-4}
\end{tabular}
\end{table}

\textbf{/F0330/} 
Falke-Taube
\begin{table}[H]
\centering
\setlength{\extrarowheight}{2pt}
\begin{tabular}{cc|c|c|}
  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Spieler $2$} \\
  & \multicolumn{1}{c}{} & \multicolumn{1}{c}{$K$} & \multicolumn{1}{c}{$D$} \\\cline{3-4}
  \multirow{2}*{Spieler $1$} & $K$ & $3,3$ & $0,10$ \\\cline{3-4} 
  & $D$ & $10,0$ & $-5,-5$ \\\cline{3-4}
\end{tabular}
\end{table}

\textbf{/F0340/} 
Kampf der Geschlechter
\begin{table}[H]
\centering
\setlength{\extrarowheight}{2pt}
\begin{tabular}{cc|c|c|}
  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Spieler $2$} \\
  & \multicolumn{1}{c}{} & \multicolumn{1}{c}{$K$} & \multicolumn{1}{c}{$D$} \\\cline{3-4}
  \multirow{2}*{Spieler $1$} & $K$ & $0,0$ & $1,3$ \\\cline{3-4} 
  & $D$ & $3,1$ & $0,0$ \\\cline{3-4}
\end{tabular}
\end{table}

\textbf{/F0350/} 
Vertrauensspiel
\begin{table}[H]
\centering
\setlength{\extrarowheight}{2pt}
\begin{tabular}{cc|c|c|}
  & \multicolumn{1}{c}{} & \multicolumn{2}{c}{Spieler $2$} \\
  & \multicolumn{1}{c}{} & \multicolumn{1}{c}{$K$} & \multicolumn{1}{c}{$D$} \\\cline{3-4}
  \multirow{2}*{Spieler $1$} & $K$ & $1,1$ & $-1,2$ \\\cline{3-4} 
  & $D$ & $0,0$ & $0,0$ \\\cline{3-4}
\end{tabular}
\end{table}

\textbf{/F0360/} 
Erstellen eines Spiels durch Eingabe der Payoffs.

\subsubsection{Strategien}

\textbf{/F0400/}
Eine Strategien /F0410/ bis /F0450/ muss mit einer Bedingung aus /F0460/ bis /F0520/ kombiniert werden. Eine kombinierte Strategie besteht aus $k$ Paaren von Strategie und Bedingung. Ist die $i$-te Bedingung erfüllt, führt der Agent die $i$-te Strategie aus. Falls nicht wird die $i+1$-te Bedingung überprüft. Jede kombinierte Strategie erhält vom Benutzer eine ID.

\textbf{/F0410/} 
Strategie: Tit-for-Tat. Der Agent kooperiert, wenn der andere Agent das letzte Mal mit ihm kooperiert hat. Beim ersten Mal kooperiert der Agent.

\textbf{/F0420/} 
Strategie: Grim. Der Agent kooperiert, wenn der andere Agent immer mit ihm kooperiert hat. Beim ersten mal kooperiert der Agent.

\textbf{/F0430/} 
Strategie: Der Agent kooperiert immer.

\textbf{/F0440/}
Strategie: Der Agent kooperiert nie.

\textbf{/F0450/}
Strategie: Die Aktion des Agenten ist zufällig.

\textbf{/F0460/}
Bedingung: Wähle die Strategie mit Wahrscheinlichkeit $\alpha$. $\alpha$ wird beim Erstellen der Simulation angegeben.

\textbf{/F0470/}
Bedingung: Wähle die Strategie, wenn der andere Agent zur Gruppe $G$ gehört. $G$ wird beim Erstellen der kombinierten Strategie festgelegt. $G$ ist die ID der Gruppe.

\textbf{/F0480/}
Bedingung: Wähle die Strategie, wenn der andere Agent zu meiner Gruppe gehört. Ist der Agent in keiner Gruppe wählt er die Strategie, wenn der andere Agent ebenfalls in keiner Gruppe ist.

\textbf{/F0490/}
Bedingung: Wähle die Strategie, wenn der andere Agent reicher ist.

\textbf{/F0500/}
Bedingung: Wähle die Strategie, wenn der andere Agent ärmer ist.

\textbf{/F0510/}
Bedingung: Wähle die Strategie, wenn der andere Agent ungefähr gleich reich ist.

\textbf{/F0520/}
Bedingung: Wähle die Strategie immer.

\subsubsection{Anpassungsalgorithmus}

\textbf{/F0600/}
Am Ende jedes Zyklus werden die Agenten gemäß ihrer Punktzahl und des Bewertungsalgorithmus in einer Rangliste platziert.

\textbf{/F0610/}
Jeder Agent wird mit der Wahrscheinlichkeit aus /F0100/ mit einem zufällig gewählten anderen Agenten verglichen. Ist der Agent erfolgreicher wird der Anpassungsalgorithmus aus /F0100/ angewandt.

\textbf{/F0620/}
Anpassungsalgorithmus: Der Agent übernimmt die Strategie des erfolgreicheren Agenten mit der Wahrscheinlichkeit $\delta \cdot \beta$. $\delta$ ist die Differenz zwischen den Rängen der Agenten. $\beta$ ist eine Konstante, so dass $\delta \cdot \beta \leq 1$ ist.

\textbf{/F0630/}
Anpassungsalgorithmus: Der Agent übernimmt die Strategie, wenn der gewählte Agent zu den obersten $x\%$ in der Rangliste gehört und einen höheren Rang hat. $x$ wird vom Benutzer bestimmt.


\subsubsection{Paarungsalgorithmus}

\textbf{/F0700/}
Ein Matching-Algorithmus paart die Agenten. Zwei Agenten werden gepaart, wenn sie nach ihrer Strategie miteinander kooperieren. Die Anzahl dieser Paare soll maximiert werden. Die restlichen Agenten werden zufällig gepaart.

\subsubsection{Bewertungsalgorithmus}

\textbf{/F0800/}
Die Agenten werden nach ihrer Gesamtpunktzahl in einer Rangliste platziert.

\textbf{/F0810/}
Der Rang ist der Durchschnittsrang über die vergangenen Zyklen. Für jeden Zyklus wird die Gesamtpunktzahl über die letzten $w$ Zyklen berechnet. Mit den Gesamtpunktzahl wird analog zu /F0800/ der Rang berechnet und der Durchschnitt gebildet. Der Durchschnittsrang wird auf die nächste ganze Zahl gerundet. Bei gleichen Rängen entscheidet die Gesamtpunktzahl über alle Zyklen.

\subsubsection{Auswertung}

\textbf{/F0900/}
Für alle beendeten Simulationen kann man die Ergebnisse anzeigen. Für jede Simulation lassen sich die Ergebnisse aller Wiederholungen anzeigen.

\textbf{/F0910/}
Der Durchschnittswert der Ergebnisse aller Wiederholungen lassen sich anzeigen.

\textbf{/F0920/}
Eine Rangliste mit allen Agenten kann angezeigt werden. Bei allen Agenten wird der Rang, die Gesamtpunktzahl und die aktuelle Strategie angezeigt.

\textbf{/F0930/}
Ein Kuchendiagramm zeigt den Anteil der vorhandenen Strategien an.

\textbf{/F0940/}
Ein Säulendiagramm zeigt an wie viele Agenten in einem Punktebereich liegen. 

\textbf{/F0950/}
In der Ergebnisansicht gibt es die Option \emph{Vergleichen mit...}. Damit kann eine Wiederholung bzw. Durchschnittswert einer Simulation mit einer Wiederholung bzw. Durchschnittswert einer anderen oder gleichen Simulation verglichen werden. Beim Vergleich werden die Diagramme nebeneinander angezeigt. Darunter werden die Differenzen der Ergebniswerte angezeigt.

\subsection{Wunschkriterien}

\subsubsection{Simulation erstellen}

\textbf{/W0000/}
Die Konfiguration einer Simulation kann gespeichert werden. Beim Speichern kann ein Name angegeben werden.

\textbf{/W0001/}
Menüpunkt zum Verwalten von Konfigurationen. Eine Konfiguration kann erstellt und gespeichert werden. Jede Konfiguration erhält einen Namen. Eine Konfiguration kann umbenannt werden. Eine bereits erstellte Konfiguration kann gelöscht werden. Erstellte Konfigurationen können bearbeitet werden.

\textbf{/W0010/}
Eine Konfiguration kann für eine Simulation geladen werden. Die geladene Konfiguration kann bearbeitet werden bevor die Simulation erstellt wird.

\textbf{/W0020/}
Eine Startpunktzahl für Agenten kann in der Initialisierung festgelegt werden. Die Verteilung der Startpunktzahl erfolgt analog zu der Verteilung der Strategien in /F0130/.

\textbf{/W0021/}
Die Startpunktzahl kann entweder zur Gesamtpunktzahl addiert oder nur für die Bestimmung der gewählten Strategie verwendet werden. 

\textbf{/W0030/}
Agenten können gemischte Strategien zugewiesen bekommen. Die Agenten können in /F0140/ mehrere Strategien zugewiesen bekommen. Zu jeder Strategie in einer gemischten Strategie wird angegeben mit welcher Wahrscheinlichkeit sie ausgewählt wird.

\textbf{/W0040/}
In der Konfiguration werden alle in der Simulation verfügbaren Strategien aufgelistet. Die in der Initialisierung verwendeten Strategien müssen enthalten sein.

\subsubsection{Auswertung}

\textbf{/W0100/}
Das Ergebnis einer Simulation kann gespeichert werden.

\textbf{/W0110/}
Das Ergebnis einer Simulation kann geladen werden.

\textbf{/W0120/}
Ein Graph zeigt die Punkte der Agenten während der Simulation an. Die Information erhält man aus /W0400/. Es gibt die Optionen:
\begin{itemize}
\item Punkte der besten $x\%$
\item Punkte der schlechtesten $x\%$
\item durchschnittliche Punkte aller Agenten
\item Median der Punkte aller Agenten
\item Punkte ausgewählter Agenten
\end{itemize}
$x$ wird vom Benutzer bestimmt. Agenten können durch einzelne IDs, Intervalle oder Gruppenzugehörigkeit ausgewählt werden. 

\textbf{/W0130/}
Der Anteil der Strategien während der Simulation kann angezeigt werden. Die Informationen erhält man aus /W0400/. Es gibt die Optionen:
\begin{itemize}
\item Anteil der Strategien der besten $x\%$
\item Anteil der Strategien der schlechtesten $x\%$
\item Anteil der Strategien aller Agenten
\item Anteil der Strategien ausgewählter Agenten
\end{itemize}
$x$ wird vom Benutzer bestimmt. Agenten können durch einzelne IDs, Intervalle  oder Gruppenzugehörigkeit ausgewählt werden. 

\textbf{/W0140/}
In /F0920/ bis /F0940/ können Agenten nach ihrer ID und Gruppenzugehörigkeit gefiltert werden. Die Ergebnisse werden nur für die ausgewählten Agenten angezeigt. IDs können einzeln und in Intervallen angegeben werden.


\subsubsection{Strategien für die Paarung von Agenten}

\textbf{/W0200/}
Agenten können für die Paarung eine eigene Strategie haben.

\textbf{/W0210/} 
Strategie: Der Agent paart mit reicheren Agenten.

\textbf{/W0220/}
Strategie: Der Agent paart mit ärmeren Agenten.

\textbf{/W0230/}
Strategie: Der Agent paart mit ungefähr gleich reichen Agenten.

\textbf{/W0240/}
Strategie: Alle Paarungen sind zufällig. Die Agenten haben keine Präferenzen mit welchem Agenten sie gepaart werden möchten.

\subsubsection{Anpassungsalgorithmus}

\textbf{/W0300/}
Anpassungsalgorithmus: Ein Agent übernimmt nur Strategien von reicheren Agenten aus der gleichen Gruppe gemäß /F0620/.

\textbf{/W0310/}
Anpassungsalgorithmus: Ein Agent übernimmt die Strategie eines reicheren Agenten, wenn dieser mit ihm immer kooperiert hat.

\textbf{/W0320/}
Anpassungsalgorithmus: Ein Agent übernimmt die Strategie eines reicheren Agenten, wenn dieser mit ihm öfter nicht kooperiert als kooperiert hat.

\textbf{/W0330/}
Anpassungsalgorithmus: Wie /F0620/ aber $\delta$ ist die Differenz der Gesamtpunktzahl.

\textbf{/W0340/}
Bei gemischten Strategien werden bei der Anpassung die Wahrscheinlichkeiten der Strategien addiert. Die Wahrscheinlichkeiten werden normiert, so dass die Summe 1 ergibt.

\textbf{/W0350/}
Mit einer Wahrscheinlichkeit von $\delta\%$ ändert der Agent seine Strategie zu einer zufälligen anderen Strategie. $\delta$ wird vom Benutzer bestimmt. Es kann nur eine in der Konfiguration festgelegt Strategie gewählt werden. Bei gemischten Strategien wird die Wahrscheinlichkeit einer Strategie erhöht. Die Wahrscheinlichkeiten werden entsprechend normiert.

\subsubsection{Bewertungsalgorithmus}

\textbf{/F0400/}
Die Agenten werden gemäß ihrer Punkte aus dem aktuellen Zyklus in einer Rangliste platziert.

\textbf{/F0410/}
Die Agenten werden gemäß ihrer Gesamtpunktzahl aus den letzten $w$ Zyklen in einer Rangliste sortiert. $w$ wird vom Benutzer bestimmt.

\subsubsection{Sonstiges}

\textbf{/W0500/}
Alle 250 Zyklen wird der Zustand aller Agenten gespeichert.

\textbf{/W0510/}
Agenten besitzen gemischte Strategien. D.h. Agenten besitzen mehrere Strategien und wählen eine zufällig aus. Die Wahrscheinlichkeit mit der eine Strategie ausgewählt wird kann sich verändern.

\textbf{/W0520/}
Die Simulation kann abgebrochen und wieder neu gestartet werden. Beim Neustart beginnt sie wieder in ihrem Anfangszustand. Beim Abbrechen werden keine Informationen gespeichert.

\textbf{/W0530/}
Die Begriffe \emph{reicher}, \emph{ärmer} und \emph{ungefähr so reich wie} werden durch die Ränge bestimmt\footnote{Nicht durch die Gesamtpunktzahl wie im Glossar definiert.}. Bei der Initialisierung kann ausgewählt werden welche Definition verwendet wird. \emph{Ungefähr so reich wie} heißt $\pm x$ Punkte bzw. Ränge, $x$ wird vom Benutzer bestimmt.